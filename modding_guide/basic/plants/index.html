<head>
   <link href='./../../../css/styles.css' rel='stylesheet' type='text/css'>
   <link rel="icon" type="image/png" href='./../../../images/favicon_logo_sh.png'>
   <link rel="apple-touch-icon" type="image/png" href='./../../../images/favicon_logo_sh.png'>
   <link rel="icon" type="image/png" sizes="144x144" href='./../../../images/favicon_logo_sh.png'>
   <title>Plants and trees</title>
</head>
<body id="documentation">
   <!-- the header of the page -->
   <div class="inner">
      <header>
<div class='logo'>
</div>
<p>Last updated: <b>December 10th, 2018</b>. Latest version <a href="https://stonehearth.github.io/modding_guide/index.html">here</a>.</p>
</header>

      <div id="content_wrapper">
         <aside class="sidebar">
   <nav>
      <ul>
      
      

   <li>
      <a href='./../../.././index.html'>Stonehearth's Modding Guide</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/index.html'>Modding Guide</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/essentials/index.html'>Modding Essentials</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/essentials/managing/index.html'>Managing mods</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/essentials/managing/workshop/index.html'>Steam Workshop mods</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/managing/unmanaged/index.html'>Local mods</a>





</li>

   
   </ul>



</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/programming_languages/index.html'>Programming Languages</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/modding_scope/index.html'>What can be modded</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/tools/index.html'>Tools for modding</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/stonehearth/index.html'>The Stonehearth mod</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/json/index.html'>Small intro to JSON</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/manifest/index.html'>The manifest</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/entities_components/index.html'>Entities and components</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/mixins/index.html'>Mixins</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/mixintos_overrides/index.html'>Mixintos and overrides</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/removing/index.html'>Mixintypes</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/localization/index.html'>Localization</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/debugging/index.html'>How to debug your errors</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/debugtools/index.html'>Using debug tools</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/essentials/debugtools/debugtools_mod/index.html'>The debugtools mod</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/debugtools/default_console/index.html'>The default console</a>





</li>

   
   </ul>



</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/startermods/index.html'>Startermod example</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/essentials/shed/index.html'>How to save time with SHED</a>





</li>

   
   </ul>



</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/index.html'>Basic Modding</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/basic/art/index.html'>Art Workflow</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/basic/art/modeling/index.html'>Creating models</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/art/icons/index.html'>Creating 2D assets</a>





</li>

   
   </ul>



</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/adding_items/index.html'>Adding new items</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/basic/adding_items/entity_forms/index.html'>Entity Forms</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/adding_items/cloning_manually/index.html'>Adding items manually</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/adding_items/cloning_with_shed/index.html'>Adding items with SHED</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/adding_items/item_scale/index.html'>Changing the scale</a>





</li>

   
   </ul>



</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/catalog/index.html'>The catalog</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/generic_resources/index.html'>Generic resources</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/craftables/index.html'>Adding recipes</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/wearables/index.html'>Adding equipment</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/basic/wearables/armor/index.html'>Armor and hats</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/wearables/weapons/index.html'>Weapons</a>





</li>

   
   </ul>



</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/storages/index.html'>Storage items</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/color_maps/index.html'>Color and material maps</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/basic/color_maps/shaders/index.html'>Materials and shaders</a>





</li>

   
   </ul>



</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/customization/index.html'>Adding customizations</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/crops/index.html'>Adding crops</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/renewable_resources/index.html'>Renewable resources</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/plants/index.html'>Plants and trees</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/static_scenarios/index.html'>Static scenarios</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/basic/static_scenarios/ore_veins/index.html'>Ore veins</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/static_scenarios/landmarks/index.html'>Landmarks</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/static_scenarios/nests_ruins/index.html'>Critter nests and ruins</a>





</li>

   
   </ul>



</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/misc_json/index.html'>Miscellaneous JSON</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/basic/misc_json/shops/index.html'>Loadouts and shops</a>





</li>

   
   </ul>



</li>

   
      

   <li>
      <a href='./../../.././modding_guide/basic/localization_mod/index.html'>Translating mods</a>





</li>

   
   </ul>



</li>

   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/index.html'>Intermediate Modding</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/regions/index.html'>Collision regions</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/regions/origins/index.html'>Origins</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/regions/collision_destination/index.html'>Collision and destination</a>





</li>

   
   </ul>



</li>

   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/building_parts/index.html'>Building parts</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/commands/index.html'>Adding commands</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/buffs/index.html'>Buffs</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/thoughts/index.html'>Thoughts</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/traits/index.html'>Traits</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/biomes/index.html'>Biomes</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/biomes/seasons_weather/index.html'>Seasons and weather</a>





</li>

   
   </ul>



</li>

   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/jobs/index.html'>Adding jobs</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/jobs/crafting_jobs/index.html'>Crafting jobs</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/jobs/combat_jobs/index.html'>Combat jobs</a>





</li>

   
   </ul>



</li>

   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/kingdoms/index.html'>Kingdoms</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/monsters/index.html'>Critters and monsters</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/hotloading/index.html'>Hotloading mods</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/intermediate/testing/index.html'>Testing your mod</a>





</li>

   
   </ul>



</li>

   
      

   <li>
      <a href='./../../.././modding_guide/advanced/index.html'>Advanced Modding</a>



   <ul>
   
      

   <li>
      <a href='./../../.././modding_guide/advanced/logging/index.html'>User settings and logging</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/advanced/events/index.html'>Events</a>





</li>

   
      

   <li>
      <a href='./../../.././modding_guide/advanced/ai/index.html'>AI actions</a>





</li>

   
   </ul>



</li>

   
   </ul>



</li>

   
   </ul>



</li>

      </ul>
   </nav>
</aside>


         <div id="content">         
   <div class='page_title'>Plants and trees</div>
   <p><p>We've learned how to create renewable and non-renewable resources in a <a href="../renewable_resources/index.html">previous section</a>. Here we'll see how we can add them to an existing biome so that they spawn at world generation. For how to create your own biome from scratch, follow this other <a href="#">guide</a>.</p></p>


<ul>
    <li><a href="#Plants">Adding new plants to an existing biome</a></li>
    <li><a href="#Trees">About trees</a></li>
    <li><a href="#SeasonalVariants">Seasonal variants</a></li>
</ul>



<h2><a name="Plants"></a>Adding new plants to an existing biome</h2>



<ol>
    <li><p>Decide in which biome(s) do you want your plant / tree to spawn. For our example, we'll make the Nightdew plant from the <code>silent_woods</code> mod appear in the temperate biome.</p></li>
    <li><p>Create a mixinto to the biome's generation_data file:</p>

<pre><code>"mixintos" : {
   "stonehearth/data/biome/temperate_generation_data.json" : "file(data/biome/temperate_generation_data.json)"
}
</code></pre></li>
    <li><p>Include your plant in the appropiate places of the biome generation's data. This is how our mixinto looks like:</p>

<pre><code>{
   "landscape": {
      "placement_table": {
         "silent_woods:plants:nightdew": {
            "placement_type": "dense",
            "parameters": {
               "grid_multiple": 2,
               "item_density": 0.2,
               "exclusion_radius": 1
            }
         },
      },
      "scattered": {
         "plants": {
            "weights": {
               "plains": {
                  "1": {
                     "silent_woods:plants:nightdew": 1
                  }
               },
               "foothills": {
                  "1": {
                     "silent_woods:plants:nightdew": 2
                  },
                  "2": {
                     "silent_woods:plants:nightdew": 1
                  }
               },
               "mountains": {
                  "1": {
                     "silent_woods:plants:nightdew": 0.1
                  }
               }
            }
         }
      }
   }
}
</code></pre>
<p>  Inside the <strong>"landscape"</strong> section, we added our plant inside the <strong>"placement_table"</strong> and <strong>"scattered" : { "plants" : {} }</strong> groups.</p>

<p>  The entries inside <strong>"placement_table"</strong> are the aliases of our plants, and contain the placement properties (to spawn them isolated or in clusters).</p>

<p>  Then, in the <strong>"scattered" : { "plants" : {} }</strong> section we have the <strong>"weights"</strong> for the different terrain elevations. Each number key inside <strong>"plains"</strong>, <strong>"foothills"</strong> and <strong>"mountains"</strong> represents a terrain elevation. Inside of them, we declare our plant's alias again and assign a <a href="../misc_json/index.html#WeightedSets">weight</a> to it (the weights are calculated with all the plants inside that entry).</p>

<p>  This way we determine how often compared to other plants will our plant appear for each terrain elevation.</p>

<p>  Now we can test and see if our plant appears in the temperate biome:
  <img src="../../../images/basic/plants/plants.png" alt="plants"/></p></li>
</ol>



<h2><a name="Trees"></a>About trees</h2>


<p>Trees have a particularity in the biome files. If we organized them in the same way than the trees from the stonehearth mod, we can include them inside the <strong>"trees"</strong> section of our biome's generation_data file. This depends on the structure of the aliases for the trees.</p>



<p>If our tree aliases end by ":small", ":medium", ":large" or ":ancient", these suffixes can be used for determining sizes in the generation data.
For example:</p>



<pre><code>  "trees": {
     "sizes": {
        "stonehearth:trees:oak": {
           "small": 0,
           "medium": 8,
           "large": 18,
           "ancient": {
              "percentage": 0
           }
        }
     },
     "weights": {
        "plains": {
           "1": {
              "stonehearth:trees:oak": 1
           }
        },
        "foothills": {
           "1": {
              "stonehearth:trees:oak": 4
           },
           "2": {
              "stonehearth:trees:oak": 2
           }
        }
     }
  }
</code></pre>

<p>Notice that the keys inside <strong>"sizes"</strong> and <strong>"weights"</strong> are not the full alias of the tree, just the common part before the last colon.</p>



<p>Then, in the sizes section, we can specify the sizes for each tree (which match with the suffixes of their aliases). These are specified as thresholds (values need to be 0 or higher), except for the "ancient" variant, which has a percentage. These thresholds are used in the noise functions that determine tree placement depending on the terrain features (water, hills, etc).</p>



<p>We can use other names for the sizes of our trees (as long as we follow this pattern), or have less different sizes.</p>



<p>Don't forget to add the individual full aliases of the trees inside the <strong>"placement_table"</strong> section too!</p>



<p>Always use the <code>stonehearth/data/biome/temperate_generation_data.json</code> file as an example, it's the one that has more comments for each parameter. You can also use the <code>desert_generation_data.json</code> or <code>arctic_generation_data.json</code> files as a template to start your own biomes.</p>



<h2><a name="SeasonalVariants"></a>Seasonal variants</h2>


<p>Biomes can have different colors and weather per season (you can invent your own <a href="#">seasons</a> too).
In addition to them, plants and trees can have different models per season if you want.</p>



<p>These are the steps to make any entity have different models per season:</p>



<ol>
    <li><p>In the JSON file where we define its QB models, we have to add a model variant per season.</p>

<pre><code>"model_variants": {
   "default": {
      "models": [
         "file(potted_flower_summer.qb)"
      ]
   },
   "autumn": {
      "models": [
         "file(potted_flower_autumn.qb)"
      ]
   },
   "winter": {
      "models": [
         "file(potted_flower_winter.qb)"
      ]
   },
   "spring": {
      "models": [
         "file(potted_flower_spring.qb)"
      ]
   }
}
</code></pre></li>
    <li><p>Then, we have to add <strong>"stonehearth:seasonal_model_switcher"</strong> also inside "components":</p>
<pre><code>"stonehearth:seasonal_model_switcher": {
   "stonehearth:biome:temperate": {
      "spring": "spring",
      "summer": "default",
      "autumn": "autumn",
      "winter": "winter"
   }
}
</code></pre>

<p>  In this component, we can add an entry for each biome that has our plant. The keys are the biome aliases, and the values map seasons (as defined in each biome JSON file) with names of our model variants that we defined above. In our example, we map the "default" model variant for the "summer" season.</p>

<p>  If instead of a biome alias we use <strong>"*"</strong> as the key, the seasonal model variants will be applied for all the biomes that have these seasons defined, even the modded ones, which is useful:</p>

<pre><code>"stonehearth:seasonal_model_switcher": {
   "*": {
      "spring": "spring",
      "summer": "default",
      "autumn": "autumn",
      "winter": "winter"
   }
}
</code></pre>

<p>  When a season changes, the first days of the new season will be of transition. During this period the terrain will change its color palette gradually, and the entities that have seasonal variants will swap their models at a random moment during the transition. They will also prefer switching models during the night (so there will be nights when no model will change and other nights when several of them will be swapped).</p>

<p>  To test, it's faster to just choose different starting seasons and check that the plant has spawned in the correct seasonal variant, since seasons take a long time to pass even while playing at higher speeds.</p>

<p>  <img src="../../../images/basic/plants/seasonal_models.png" alt="seasonal_models"/></p></li>
</ol>

   
</div>

      </div>
      <footer>
</footer>

   </div>
</body>
